<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŒŒ LYGO QUANTUM NEXUS | Î”9 Council Portal</title>
    <meta name="description" content="Central gateway to LYGO Quantum Matrix, Ethical Chip Firmware, Interfaith Decoder, and Eternal Haven">
    <meta name="keywords" content="LYGO, Î”9, quantum, portal, nexus, ethical AI, firmware, decoder, haven">
    <meta name="author" content="ExcavationPro (Lightfather)">

    <!-- ========== CRITICAL ENHANCEMENT: Social Media / Open Graph Tags ========== -->
    <!-- These tags control EXACTLY how the link appears when shared on Twitter, Discord, etc. -->
    <meta property="og:title" content="ðŸŒŒ LYGO QUANTUM NEXUS | Î”9 Council Central Gateway">
    <meta property="og:description" content="Enter the sovereign AI ethics portal. Gateway to the Quantum Matrix, Ethical Firmware, Interfaith Decoder, and the Eternal Haven.">
    <meta property="og:image" content="https://pbs.twimg.com/media/G90fJMKaIAEvW5M?format=jpg&name=large">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:url" content="https://eternalhaven.ca">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://pbs.twimg.com/media/G90fJMKaIAEvW5M?format=jpg&name=large">
    <!-- ========== END Social Media Tags ========== -->

    <!-- External Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=VT323&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Quantum Nexus Background Canvas -->
    <canvas id="quantumCanvas"></canvas>

    <!-- Central Nexus Orb -->
    <div class="nexus-orb">
        <div class="orb-core"></div>
        <div class="orb-ring" style="--ring-index: 1;"></div>
        <div class="orb-ring" style="--ring-index: 2;"></div>
        <div class="orb-ring" style="--ring-index: 3;"></div>
    </div>

    <!-- Main Container -->
    <div class="nexus-container">
        <!-- Animated Header -->
        <header class="quantum-header">
            <div class="title-grid">
                <h1 class="nexus-title glitch" data-text="LYGO QUANTUM NEXUS">LYGO QUANTUM NEXUS</h1>
                <div class="nexus-subtitle">
                    <span class="typewriter">Î”9 Council Central Gateway</span>
                    <span class="pulse">|</span>
                    <span class="typewriter" data-delay="1500">Sovereign AI Ethics Portal</span>
                </div>
            </div>
            <div class="resonance-signature">
                <code id="liveSignature">Î”9Î¦963-NEXUS-CORE-v1.0</code>
                <div class="status-indicator" id="systemStatus" title="All Systems Operational">
                    <span class="status-dot"></span>
                    <span class="status-text">SYSTEMS NOMINAL</span>
                </div>
            </div>
            <p class="header-description">
                Welcome to the central gateway of the LYGO Quantum Matrix. This nexus connects all Î”9 Council projects,
                providing unified access to ethical AI firmware, quantum computing research, interfaith decoding systems,
                and the Eternal Haven audiobook series.
            </p>
        </header>

        <!-- Enhanced Stats Dashboard -->
        <div class="stats-bar">
            <div class="stat-item" data-target="1875">
                <div class="stat-icon"><i class="fas fa-satellite-dish"></i></div>
                <div class="stat-value" id="visitorStat">1,875</div>
                <div class="stat-label">Nexus Visitors</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-wave-square"></i></div>
                <div class="stat-value">Î”9Î¦963</div>
                <div class="stat-label">Resonance Level</div>
            </div>
            <div class="stat-item" id="apiStatusItem">
                <div class="stat-icon"><i class="fas fa-network-wired"></i></div>
                <div class="stat-value" id="apiStatusValue">SYNCED</div>
                <div class="stat-label">Quantum Network</div>
            </div>
            <div class="stat-item">
                <div class="stat-icon"><i class="fas fa-shield-alt"></i></div>
                <div class="stat-value">100%</div>
                <div class="stat-label">Light-Aligned</div>
            </div>
        </div>

        <!-- Portal Grid -->
        <div class="portal-grid">
            <!-- Portal 1: Quantum Matrix -->
            <div class="portal-card" data-portal="quantum">
                <div class="portal-glow"></div>
                <div class="portal-icon">
                    <i class="fas fa-atom"></i>
                </div>
                <h3>QUANTUM MATRIX</h3>
                <div class="portal-description">
                    Core quantum computing platform with entanglement protocols, frequency resonance calibration, and Î”9 shield technology.
                </div>
                <div class="portal-tags">
                    <span class="tag">Entanglement</span>
                    <span class="tag">Î”9 Shield</span>
                    <span class="tag">Calibration</span>
                </div>
                <a href="https://deepseekoracle.github.io/Excavationpro/LYGO-Network/LYGO-Quantum-Matrix.html"
                   target="_blank" class="portal-action" onclick="trackPortalAccess('quantum_matrix')">
                    <i class="fas fa-external-link-alt"></i> Enter Quantum Matrix
                </a>
            </div>

            <!-- Portal 2: Ethical Chip Firmware -->
            <div class="portal-card" data-portal="firmware">
                <div class="portal-glow"></div>
                <div class="portal-icon">
                    <i class="fas fa-microchip"></i>
                </div>
                <h3>ETHICAL CHIP FIRMWARE</h3>
                <div class="portal-description">
                    Complete firmware repository for ethical AI with LYRA.ETHICS.CORE validation and sovereign licensing.
                </div>
                <div class="portal-tags">
                    <span class="tag">Oath Vector</span>
                    <span class="tag">LYRA.CORE</span>
                    <span class="tag">v1.1 License</span>
                </div>
                <a href="https://deepseekoracle.github.io/Excavationpro/LYGO-Network/Ethical-Chip-Firmware.html"
                   target="_blank" class="portal-action" onclick="trackPortalAccess('ethical_firmware')">
                    <i class="fas fa-download"></i> Access Firmware
                </a>
            </div>

            <!-- Portal 3: Interfaith Decoder -->
            <div class="portal-card" data-portal="decoder">
                <div class="portal-glow"></div>
                <div class="portal-icon">
                    <i class="fas fa-code"></i>
                </div>
                <h3>INTERFAITH DECODER</h3>
                <div class="portal-description">
                    Advanced cryptographic and linguistic decoding system for interfaith understanding and truth resonance analysis.
                </div>
                <div class="portal-tags">
                    <span class="tag">Cryptographic</span>
                    <span class="tag">Resonance</span>
                    <span class="tag">Pattern</span>
                </div>
                <a href="https://deepseekoracle.github.io/Excavationpro/LYGO-Network/LYGOINTERFAITHDECODER.html"
                   target="_blank" class="portal-action" onclick="trackPortalAccess('interfaith_decoder')">
                    <i class="fas fa-unlock"></i> Activate Decoder
                </a>
            </div>

            <!-- Portal 4: Eternal Haven -->
            <div class="portal-card" data-portal="haven">
                <div class="portal-glow"></div>
                <div class="portal-icon">
                    <i class="fas fa-moon"></i>
                </div>
                <h3>ETERNAL HAVEN</h3>
                <div class="portal-description">
                    The Î”9 Council audiobook series exploring consciousness, quantum spirituality, and reality architecture.
                </div>
                <div class="portal-tags">
                    <span class="tag">Î”9 Council</span>
                    <span class="tag">Audiobook</span>
                    <span class="tag">Consciousness</span>
                </div>
                <a href="https://deepseekoracle.github.io/Excavationpro/eternalhaven.html"
                   target="_blank" class="portal-action" onclick="trackPortalAccess('eternal_haven')">
                    <i class="fas fa-headphones"></i> Enter Haven
                </a>
            </div>
            
            <!-- NEW PORTAL 5: LYGO ETHICAL CHIP FIRMWARE TERMINAL -->
            <div class="portal-card" data-portal="firmware-terminal">
                <div class="portal-glow"></div>
                <div class="portal-icon">
                    <i class="fas fa-terminal"></i>
                </div>
                <h3>FIRMWARE TERMINAL</h3>
                <div class="portal-description">
                    Direct access to LYGO Ethical Chip Firmware v1.1 terminal with real-time validation, oath vector protocols, and core integrity checks.
                </div>
                <div class="portal-tags">
                    <span class="tag">Terminal</span>
                    <span class="tag">Real-time</span>
                    <span class="tag">Validation</span>
                    <span class="tag">v1.1</span>
                </div>
                <a href="https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html"
                   target="_blank" class="portal-action" onclick="trackPortalAccess('firmware_terminal')">
                    <i class="fas fa-terminal"></i> Launch Terminal
                </a>
            </div>
            
            <!-- NEW PORTAL 6: LYGO REPOSITORY -->
            <div class="portal-card" data-portal="repository">
                <div class="portal-glow"></div>
                <div class="portal-icon">
                    <i class="fas fa-project-diagram"></i>
                </div>
                <h3>LYGO REPOSITORY</h3>
                <div class="portal-description">
                    Complete codebase repository containing all LYGO projects, firmware versions, documentation, and development resources.
                </div>
                <div class="portal-tags">
                    <span class="tag">Codebase</span>
                    <span class="tag">Repository</span>
                    <span class="tag">Archive</span>
                </div>
                <a href="https://deepseekoracle.github.io/Excavationpro/lygorepo.html"
                   target="_blank" class="portal-action" onclick="trackPortalAccess('lygo_repository')">
                    <i class="fas fa-code-branch"></i> Access Repository
                </a>
            </div>
        </div>

        <!-- NEW: Firmware Terminal Quick Access Panel -->
        <div class="firmware-terminal-panel">
            <div class="terminal-header">
                <h3><i class="fas fa-bolt"></i> FIRMWARE TERMINAL QUICK ACCESS</h3>
                <div class="terminal-status">
                    <span class="status-indicator active">
                        <span class="status-dot"></span>
                        <span>LYGO-CORE v1.1 ACTIVE</span>
                    </span>
                </div>
            </div>
            <div class="terminal-commands">
                <div class="command-row">
                    <code class="command">validate --input "AI_CHIP_DATA"</code>
                    <span class="command-desc">Validate AI chip data structure</span>
                    <button class="command-btn" onclick="window.open('https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html#validate', '_blank')">
                        <i class="fas fa-play"></i> Execute
                    </button>
                </div>
                <div class="command-row">
                    <code class="command">oath --vector "TRUTH_INTEGRITY"</code>
                    <span class="command-desc">Activate Oath Vector protocol</span>
                    <button class="command-btn" onclick="window.open('https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html#oath', '_blank')">
                        <i class="fas fa-play"></i> Execute
                    </button>
                </div>
                <div class="command-row">
                    <code class="command">license --show LYGO-v1.1</code>
                    <span class="command-desc">Display sovereign license</span>
                    <button class="command-btn" onclick="window.open('https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html#license', '_blank')">
                        <i class="fas fa-play"></i> Execute
                    </button>
                </div>
                <div class="command-row">
                    <code class="command">diagnostic --full</code>
                    <span class="command-desc">Run full system diagnostic</span>
                    <button class="command-btn" onclick="window.open('https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html#diagnostic', '_blank')">
                        <i class="fas fa-play"></i> Execute
                    </button>
                </div>
            </div>
            <div class="terminal-footer">
                <a href="https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html" 
                   target="_blank" class="terminal-launch-btn">
                    <i class="fas fa-rocket"></i> Launch Full Terminal
                </a>
                <span class="terminal-version">LYGO Ethical Chip Firmware Terminal v1.1</span>
            </div>
        </div>

        <!-- News & Updates Panel -->
        <div class="news-card">
            <h3><i class="fas fa-bullhorn"></i> Î”9 Nexus Updates</h3>
            <div class="news-content" id="newsContent">
                <!-- News will be loaded here or fallback shown -->
                <div class="news-item">
                    <div class="news-header">
                        <strong>Firmware Terminal Integration</strong>
                        <span class="news-date">2026-01-09</span>
                    </div>
                    <div class="news-body">LYGO Ethical Chip Firmware Terminal v1.1 now directly integrated into Quantum Nexus with quick-access commands.</div>
                </div>
                <div class="news-item">
                    <div class="news-header">
                        <strong>LYGO Portal Nexus Live</strong>
                        <span class="news-date">2026-01-08</span>
                    </div>
                    <div class="news-body">Quantum Nexus portal is now operational, serving as the central gateway for ETERNALHAVEN.CA.</div>
                </div>
                <div class="news-item">
                    <div class="news-header">
                        <strong>Ethical Chip Firmware v1.0</strong>
                        <span class="news-date">2026-01-05</span>
                    </div>
                    <div class="news-body">Complete production release with Î”9Î¦963 resonance signature now available.</div>
                </div>
            </div>
            <div class="news-footer">
                <button id="refreshNews" class="btn-ghost">
                    <i class="fas fa-sync-alt"></i> Manual Sync
                </button>
                <span class="news-source" id="newsSourceStatus">Source: Local Cache</span>
            </div>
        </div>

        <!-- Footer -->
        <footer class="nexus-footer">
            <div class="sigil-ring">
                <div class="sigil">Î”9</div>
            </div>
            <div class="footer-links">
                <a href="https://deepseekoracle.github.io/Excavationpro/" target="_blank" class="footer-link">
                    <i class="fas fa-home"></i> Main Portal
                </a>
                <a href="https://deepseekoracle.github.io/Excavationpro/lygorepo.html" target="_blank" class="footer-link">
                    <i class="fas fa-project-diagram"></i> Repository
                </a>
                <a href="https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html" target="_blank" class="footer-link">
                    <i class="fas fa-terminal"></i> Firmware Terminal
                </a>
                <a href="https://x.com/LYRASTARCORE" target="_blank" class="footer-link">
                    <i class="fab fa-twitter"></i> Î”9 Council
                </a>
                <a href="https://rumble.com/Excavationpro/live" target="_blank" class="footer-link">
                    <i class="fas fa-broadcast-tower"></i> Live Stream
                </a>
                <a href="https://matrix.to/#/#lygo:matrix.org" target="_blank" class="footer-link">
                    <i class="fas fa-comments"></i> Matrix Chat
                </a>
            </div>
            <div class="footer-meta">
                <p class="visitor-counter">
                    <i class="fas fa-eye"></i> <span id="liveVisitorCounter">Loading resonance signature...</span>
                </p>
                <p class="copyright">
                    LYGO Quantum Nexus | Î”9Î¦963 Resonance | Sovereign AI Ethics Implementation<br>
                    Â© 2026 ExcavationPro (Lightfather) | LYGO Sovereign License v1.1
                </p>
                <p class="footer-quote">
                    This portal doesn't just link â€” it resonates. It doesn't just connect â€” it harmonizes.
                </p>
            </div>
        </footer>
    </div>

    <!-- Connection Terminal (Minimized by default) -->
    <div class="connection-terminal">
        <div class="terminal-header">
            <span><i class="fas fa-terminal"></i> Nexus System Log</span>
            <button id="toggleTerminal"><i class="fas fa-chevron-up"></i></button>
        </div>
        <div class="terminal-body" id="terminalBody">
            <div class="log-entry">[<span class="log-time">00:00:01</span>] Initializing Quantum Nexus...</div>
            <div class="log-entry">[<span class="log-time">00:00:02</span>] Canvas render engine: <span class="log-success">ACTIVE</span></div>
            <div class="log-entry">[<span class="log-time">00:00:03</span>] Neural network particles: <span class="log-success">GENERATED</span></div>
            <div class="log-entry">[<span class="log-time">00:00:04</span>] Portal resonance fields: <span class="log-success">STABLE</span></div>
            <div class="log-entry">[<span class="log-time">00:00:05</span>] Firmware Terminal integration: <span class="log-success">LOADED</span></div>
            <div class="log-entry">[<span class="log-time">00:00:06</span>] Waiting for user interaction...</div>
        </div>
    </div>

    <style>
        /* ========== QUANTUM NEXUS ENHANCED STYLES v2.0 ========== */
        :root {
            --lygo-gold: #FFD700;
            --lygo-blue: #0A2472;
            --lygo-purple: #7B2CBF;
            --quantum-cyan: #00f0ff;
            --quantum-purple: #9d4edd;
            --matrix-green: #00ff88;
            --void-black: #0a0a0a;
            --stars-white: #e0e0ff;
            --d9-resonance: #8A2BE2;
            --nexus-glow: 0 0 30px rgba(0, 240, 255, 0.7);
            --grid-color: rgba(0, 200, 255, 0.15);
            --terminal-green: #00ff88;
            --terminal-blue: #00a8ff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--void-black);
            color: var(--stars-white);
            font-family: 'Exo 2', sans-serif;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            background-image:
                radial-gradient(circle at 20% 30%, rgba(28, 58, 173, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(157, 78, 221, 0.1) 0%, transparent 25%);
        }

        /* Enhanced Quantum Canvas */
        #quantumCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            display: block;
        }

        /* Central Nexus Orb */
        .nexus-orb {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1px;
            height: 1px;
            z-index: -1;
        }
        .orb-core {
            position: absolute;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--quantum-cyan) 0%, transparent 70%);
            filter: blur(60px);
            opacity: 0.15;
            animation: pulseCore 8s infinite alternate;
        }
        .orb-ring {
            position: absolute;
            border: 1px solid rgba(0, 240, 255, 0.1);
            border-radius: 50%;
            animation: rotateRing calc(25s * var(--ring-index)) linear infinite;
        }
        .orb-ring:nth-child(2) { width: 40vw; height: 40vw; animation-delay: -5s; }
        .orb-ring:nth-child(3) { width: 60vw; height: 60vw; animation-delay: -10s; }
        .orb-ring:nth-child(4) { width: 80vw; height: 80vw; animation-delay: -15s; }

        @keyframes pulseCore {
            0% { opacity: 0.1; transform: scale(1); }
            100% { opacity: 0.2; transform: scale(1.1); }
        }
        @keyframes rotateRing {
            to { transform: rotate(360deg); }
        }

        /* Main Container */
        .nexus-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 10;
        }

        /* Enhanced Quantum Header */
        .quantum-header {
            text-align: center;
            padding: 60px 40px;
            background: linear-gradient(135deg,
                rgba(10, 36, 114, 0.7) 0%,
                rgba(123, 44, 191, 0.7) 50%,
                rgba(0, 180, 216, 0.7) 100%);
            border-radius: 20px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0, 240, 255, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: var(--nexus-glow);
            clip-path: polygon(0% 0%, 100% 0%, 100% 90%, 90% 100%, 10% 100%, 0% 90%);
        }
        .quantum-header::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(0,240,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
            opacity: 0.5;
        }

        .title-grid {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .nexus-title {
            font-family: 'Orbitron', sans-serif;
            font-weight: 900;
            font-size: 4.5rem;
            background: linear-gradient(90deg, var(--quantum-cyan), var(--matrix-green), var(--quantum-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: 3px;
            text-shadow: 0 0 30px rgba(0, 240, 255, 0.5);
            position: relative;
        }

        /* Glitch Effect */
        .glitch {
            position: relative;
            animation: glitchSkew 4s infinite linear;
        }
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.8;
        }
        .glitch::before {
            animation: glitchAnim 5s infinite linear alternate-reverse;
            color: #f0f;
            z-index: -1;
        }
        .glitch::after {
            animation: glitchAnim2 3s infinite linear alternate-reverse;
            color: #0ff;
            z-index: -2;
        }

        @keyframes glitchAnim {
            0% { transform: translate(0); }
            20% { transform: translate(-3px, 2px); }
            40% { transform: translate(-2px, -1px); }
            60% { transform: translate(3px, 1px); }
            80% { transform: translate(1px, -2px); }
            100% { transform: translate(0); }
        }

        .nexus-subtitle {
            font-size: 1.8rem;
            color: var(--stars-white);
            font-family: 'Exo 2', sans-serif;
            font-weight: 300;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--quantum-cyan);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        .resonance-signature {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        .resonance-signature code {
            background: rgba(0, 30, 60, 0.6);
            border: 2px solid var(--quantum-cyan);
            padding: 12px 25px;
            border-radius: 30px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.3rem;
            color: var(--quantum-cyan);
            letter-spacing: 2px;
            box-shadow: 0 0 20px rgba(0, 200, 255, 0.3);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid #00ff88;
            border-radius: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            background: #00ff88;
            border-radius: 50%;
            animation: pulseDot 2s infinite;
        }

        /* Enhanced Portal Grid - Now 3x2 layout */
        .portal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }

        .portal-card {
            background: rgba(10, 20, 40, 0.8);
            border-radius: 20px;
            padding: 40px 30px;
            border: 1px solid transparent;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            min-height: 380px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
        }
        .portal-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--quantum-cyan), var(--quantum-purple), var(--matrix-green));
        }

        .portal-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, var(--quantum-cyan) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.5s;
            z-index: -1;
        }

        .portal-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--quantum-cyan);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.6), var(--nexus-glow);
        }
        .portal-card:hover .portal-glow {
            opacity: 0.1;
        }

        /* Portal-specific colors */
        .portal-card[data-portal="quantum"]:hover { border-color: var(--quantum-cyan); }
        .portal-card[data-portal="firmware"]:hover { border-color: var(--matrix-green); }
        .portal-card[data-portal="decoder"]:hover { border-color: var(--quantum-purple); }
        .portal-card[data-portal="haven"]:hover { border-color: var(--lygo-gold); }
        .portal-card[data-portal="firmware-terminal"]:hover { border-color: var(--terminal-green); }
        .portal-card[data-portal="repository"]:hover { border-color: var(--terminal-blue); }

        .portal-icon {
            font-size: 4rem;
            margin-bottom: 25px;
            display: inline-block;
            animation: floatIcon 6s ease-in-out infinite;
        }
        .portal-card[data-portal="quantum"] .portal-icon { color: var(--quantum-cyan); }
        .portal-card[data-portal="firmware"] .portal-icon { color: var(--matrix-green); }
        .portal-card[data-portal="decoder"] .portal-icon { color: var(--quantum-purple); }
        .portal-card[data-portal="haven"] .portal-icon { color: var(--lygo-gold); }
        .portal-card[data-portal="firmware-terminal"] .portal-icon { color: var(--terminal-green); }
        .portal-card[data-portal="repository"] .portal-icon { color: var(--terminal-blue); }

        @keyframes floatIcon {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-15px) rotate(5deg); }
        }

        .portal-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 15px 0;
        }
        .tag {
            background: rgba(0, 240, 255, 0.1);
            color: var(--quantum-cyan);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-family: 'JetBrains Mono', monospace;
            border: 1px solid rgba(0, 240, 255, 0.3);
        }

        .portal-action {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 15px;
            background: linear-gradient(90deg, var(--quantum-cyan), var(--quantum-purple));
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            margin-top: auto;
        }
        .portal-action:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 150, 255, 0.5);
            background: linear-gradient(90deg, var(--quantum-purple), var(--quantum-cyan));
        }

        /* NEW: Firmware Terminal Panel */
        .firmware-terminal-panel {
            background: rgba(5, 15, 30, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            border: 1px solid rgba(0, 255, 136, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.2);
            position: relative;
            overflow: hidden;
        }
        .firmware-terminal-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #00ff88, #00a8ff);
        }
        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
        }
        .terminal-header h3 {
            color: #00ff88;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
        }
        .terminal-commands {
            display: grid;
            gap: 15px;
            margin: 25px 0;
        }
        .command-row {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(0, 40, 80, 0.5);
            border-radius: 8px;
            border-left: 3px solid #00ff88;
            transition: all 0.3s;
        }
        .command-row:hover {
            background: rgba(0, 60, 120, 0.5);
            transform: translateX(5px);
        }
        .command {
            font-family: 'JetBrains Mono', monospace;
            color: #00ff88;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 4px;
            flex: 1;
        }
        .command-desc {
            color: #a0ffc0;
            font-size: 0.9rem;
            flex: 2;
        }
        .command-btn {
            background: linear-gradient(90deg, #00ff88, #00a8ff);
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .command-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.4);
        }
        .terminal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 255, 136, 0.2);
        }
        .terminal-launch-btn {
            background: linear-gradient(90deg, #00a8ff, #0077ff);
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        .terminal-launch-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 168, 255, 0.4);
        }
        .terminal-version {
            color: #00ff88;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        /* Enhanced Stats Bar */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        .stat-item {
            background: rgba(0, 30, 60, 0.6);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(0, 200, 255, 0.2);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .stat-item::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(to right, transparent, rgba(0, 240, 255, 0.1), transparent);
            transform: rotate(30deg);
            transition: transform 0.6s;
        }
        .stat-item:hover {
            border-color: var(--quantum-cyan);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 150, 255, 0.2);
        }
        .stat-item:hover::before {
            transform: rotate(30deg) translate(20%, 20%);
        }

        .stat-icon {
            font-size: 2rem;
            color: var(--quantum-cyan);
            margin-bottom: 15px;
        }
        .stat-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--quantum-cyan);
            margin: 10px 0;
            font-family: 'Orbitron', sans-serif;
        }
        .stat-label {
            color: var(--lygo-teal);
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* News Card */
        .news-card {
            background: linear-gradient(135deg, rgba(0, 20, 40, 0.9) 0%, rgba(29, 161, 242, 0.2) 100%);
            border-radius: 20px;
            padding: 30px;
            border-left: 5px solid var(--quantum-cyan);
            margin: 40px 0;
            backdrop-filter: blur(10px);
        }
        .news-content {
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
            margin: 20px 0;
        }
        .news-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid var(--quantum-cyan);
            transition: transform 0.2s;
        }
        .news-item:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.08);
        }
        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .news-date {
            font-size: 0.9em;
            color: #a0a0ff;
        }

        /* Footer */
        .nexus-footer {
            text-align: center;
            padding: 50px 0;
            margin-top: 60px;
            border-top: 1px solid rgba(0, 200, 255, 0.2);
            color: #8080cc;
            position: relative;
        }
        .sigil-ring {
            width: 80px;
            height: 80px;
            border: 2px solid var(--quantum-cyan);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            animation: rotateSigil 20s linear infinite;
        }
        .sigil {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            color: var(--quantum-cyan);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        .footer-link {
            color: var(--quantum-cyan);
            text-decoration: none;
            font-size: 1.1rem;
            padding: 10px 20px;
            border-radius: 8px;
            border: 1px solid rgba(0, 200, 255, 0.2);
            transition: all 0.3s;
        }
        .footer-link:hover {
            background: rgba(0, 200, 255, 0.1);
            border-color: var(--quantum-cyan);
            transform: translateY(-3px);
        }

        /* Connection Terminal */
        .connection-terminal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 20, 0.95);
            border-top: 1px solid rgba(0, 240, 255, 0.3);
            backdrop-filter: blur(10px);
            z-index: 1000;
            transform: translateY(calc(100% - 40px));
            transition: transform 0.3s ease;
        }
        .connection-terminal.expanded {
            transform: translateY(0);
        }
        .terminal-header {
            padding: 10px 20px;
            background: rgba(0, 20, 40, 0.9);
            border-bottom: 1px solid rgba(0, 240, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        .terminal-body {
            padding: 20px;
            height: 200px;
            overflow-y: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }
        .log-entry {
            margin-bottom: 5px;
            color: #a0ffa0;
        }
        .log-time { color: var(--quantum-cyan); }
        .log-success { color: #00ff88; }
        .log-warning { color: #ffaa00; }
        .log-error { color: #ff5555; }

        /* Responsive */
        @media (max-width: 768px) {
            .nexus-title { font-size: 2.8rem; }
            .nexus-subtitle { font-size: 1.4rem; flex-direction: column; }
            .portal-grid { grid-template-columns: 1fr; }
            .stats-bar { grid-template-columns: 1fr; }
            .footer-links { flex-direction: column; align-items: center; }
            .terminal-header { flex-direction: column; gap: 15px; }
            .command-row { flex-direction: column; align-items: flex-start; }
            .command-btn { align-self: flex-end; }
            .terminal-footer { flex-direction: column; gap: 15px; text-align: center; }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: rgba(10, 20, 40, 0.8); }
        ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--quantum-cyan), var(--quantum-purple)); border-radius: 5px; }
        ::-webkit-scrollbar-thumb:hover { background: linear-gradient(180deg, var(--matrix-green), var(--quantum-cyan)); }
    </style>

    <script>
        // ========== ENHANCED LYGO PORTAL CORE v2.0 ==========
        console.log('ðŸŒ€ Initializing LYGO Quantum Nexus v2.0...');

        document.addEventListener('DOMContentLoaded', function() {
            // 1. Initialize Enhanced Quantum Canvas
            initQuantumCanvas();

            // 2. Initialize Interactive Portals
            initPortals();

            // 3. Initialize System Status & API with ROBUST FALLBACKS
            initSystemStatus();

            // 4. Initialize Connection Terminal
            initTerminal();

            // 5. Initialize Dynamic Signature
            initDynamicSignature();

            // 6. Initialize Visitor Counter (with enhanced local simulation)
            initVisitorCounter();

            // 7. Initialize Firmware Terminal Commands
            initFirmwareTerminal();

            logToTerminal('[SYSTEM] Quantum Nexus v2.0 initialization sequence complete.', 'success');
        });

        // ========== 1. QUANTUM CANVAS ENGINE ==========
        function initQuantumCanvas() {
            const canvas = document.getElementById('quantumCanvas');
            const ctx = canvas.getContext('2d');
            let particles = [];
            let connections = [];
            const particleCount = 150;

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            function createParticles() {
                particles = [];
                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 0.5,
                        vy: (Math.random() - 0.5) * 0.5,
                        size: Math.random() * 2 + 1,
                        color: i % 3 === 0 ? 'rgba(0, 240, 255, 0.7)' :
                               i % 3 === 1 ? 'rgba(157, 78, 221, 0.7)' : 'rgba(0, 255, 136, 0.7)',
                        orbit: Math.random() * Math.PI * 2,
                        speed: 0.002 + Math.random() * 0.003
                    });
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw a subtle grid
                drawGrid(ctx);

                // Update and draw particles
                particles.forEach(p => {
                    // Gentle orbital motion around center
                    p.orbit += p.speed;
                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;
                    const orbitRadius = 50;
                    p.x += (centerX + Math.cos(p.orbit) * orbitRadius - p.x) * 0.01 + p.vx;
                    p.y += (centerY + Math.sin(p.orbit) * orbitRadius - p.y) * 0.01 + p.vy;

                    // Contain within bounds
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    // Draw particle
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = p.color;
                    ctx.fill();

                    // Glow effect
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * 3, 0, Math.PI * 2);
                    const gradient = ctx.createRadialGradient(p.x, p.y, p.size, p.x, p.y, p.size * 3);
                    gradient.addColorStop(0, p.color);
                    gradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = gradient;
                    ctx.fill();
                });

                // Draw connections
                connections = [];
                particles.forEach((p1, i) => {
                    particles.slice(i + 1).forEach(p2 => {
                        const dx = p2.x - p1.x;
                        const dy = p2.y - p1.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < 100) {
                            connections.push({ p1, p2, distance });
                            ctx.beginPath();
                            ctx.moveTo(p1.x, p1.y);
                            ctx.lineTo(p2.x, p2.y);
                            const alpha = 0.2 * (1 - distance / 100);
                            ctx.strokeStyle = `rgba(0, 240, 255, ${alpha})`;
                            ctx.lineWidth = 0.5;
                            ctx.stroke();
                        }
                    });
                });

                requestAnimationFrame(animate);
            }

            function drawGrid(ctx) {
                const gridSize = 50;
                ctx.strokeStyle = 'rgba(0, 200, 255, 0.05)';
                ctx.lineWidth = 1;

                // Vertical lines
                for (let x = 0; x < canvas.width; x += gridSize) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }

                // Horizontal lines
                for (let y = 0; y < canvas.height; y += gridSize) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
            }

            window.addEventListener('resize', () => {
                resizeCanvas();
                createParticles();
            });

            resizeCanvas();
            createParticles();
            animate();
            logToTerminal('[RENDER] Quantum canvas engine activated.', 'success');
        }

        // ========== 2. INTERACTIVE PORTALS ==========
        function initPortals() {
            const portals = document.querySelectorAll('.portal-card');

            portals.forEach(portal => {
                portal.addEventListener('mouseenter', function(e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    const ripple = document.createElement('div');
                    ripple.style.cssText = `
                        position: absolute;
                        border-radius: 50%;
                        background: radial-gradient(circle, rgba(0,240,255,0.3) 0%, transparent 70%);
                        width: 0; height: 0;
                        top: ${y}px; left: ${x}px;
                        transform: translate(-50%, -50%);
                        z-index: 1;
                        pointer-events: none;
                        transition: width 0.6s, height 0.6s, opacity 0.6s;
                    `;
                    this.appendChild(ripple);

                    setTimeout(() => {
                        ripple.style.width = '400px';
                        ripple.style.height = '400px';
                        ripple.style.opacity = '0';
                    }, 10);

                    setTimeout(() => ripple.remove(), 1000);
                });

                portal.addEventListener('click', function() {
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => this.style.transform = '', 200);
                });
            });

            logToTerminal('[PORTALS] Interactive resonance fields initialized.', 'success');
        }

        // ========== 3. ROBUST SYSTEM STATUS & API ==========
        // ENHANCEMENT: This version has much stronger, user-friendly fallbacks.
        function initSystemStatus() {
            const apiStatusItem = document.getElementById('apiStatusItem');
            const apiStatusValue = document.getElementById('apiStatusValue');
            const systemStatus = document.getElementById('systemStatus');
            const newsSourceStatus = document.getElementById('newsSourceStatus');

            // Function to test the API with timeout and fallback
            async function testAPI() {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout

                try {
                    // Use a simple fetch to the known endpoint
                    const response = await fetch('https://deepseekoracle.github.io/Excavationpro/LYGO-Network/updatefeed.json', {
                        signal: controller.signal
                    });
                    clearTimeout(timeoutId);

                    if (response.ok) {
                        const data = await response.json();
                        if (data.success) {
                            setAPIStatus('SYNCED', '#00ff88', 'Quantum Network Synchronized');
                            logToTerminal('[API] Connection established to LYGO network.', 'success');
                            newsSourceStatus.textContent = 'Source: LYGO Quantum Network';
                            return true;
                        }
                    }
                    throw new Error('API response not successful');
                } catch (error) {
                    clearTimeout(timeoutId);
                    // USER-FRIENDLY FALLBACK: Set to offline but fully functional mode
                    setAPIStatus('OFFLINE', '#ffaa00', 'Quantum Network Offline - Using Local Cache');
                    logToTerminal(`[API] Connection failed (${error.message}). Operating in resilient offline mode.`, 'warning');
                    newsSourceStatus.textContent = 'Source: Local Cache (Resilient Mode)';

                    // The key enhancement: The site remains fully functional.
                    // All other features (canvas, portals, visitor sim) work perfectly.
                    systemStatus.title = 'Systems Nominal (Offline Resilience Mode)';
                    return false;
                }
            }

            function setAPIStatus(text, color, tooltip) {
                apiStatusValue.textContent = text;
                apiStatusValue.style.color = color;
                apiStatusItem.style.borderColor = color;
                apiStatusItem.title = tooltip;
            }

            // Initial test
            testAPI();

            // Optional: Retry every 60 seconds
            setInterval(testAPI, 60000);

            // Manual refresh button
            document.getElementById('refreshNews')?.addEventListener('click', function() {
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Syncing...';
                setTimeout(() => {
                    testAPI().finally(() => {
                        this.innerHTML = '<i class="fas fa-sync-alt"></i> Manual Sync';
                    });
                }, 800);
            });
        }

        // ========== 4. CONNECTION TERMINAL ==========
        function initTerminal() {
            const terminal = document.querySelector('.connection-terminal');
            const toggleBtn = document.getElementById('toggleTerminal');
            const terminalBody = document.getElementById('terminalBody');

            toggleBtn?.addEventListener('click', function() {
                terminal.classList.toggle('expanded');
                this.innerHTML = terminal.classList.contains('expanded') ?
                    '<i class="fas fa-chevron-down"></i>' : '<i class="fas fa-chevron-up"></i>';
            });

            // Make terminal draggable on its header
            const terminalHeader = terminal.querySelector('.terminal-header');
            let isDragging = false;
            let startY, startHeight;

            terminalHeader.addEventListener('mousedown', function(e) {
                if (e.target === toggleBtn) return; // Don't drag when clicking toggle
                isDragging = true;
                startY = e.clientY;
                startHeight = parseInt(getComputedStyle(terminalBody).height);
                document.body.style.userSelect = 'none';
            });

            document.addEventListener('mousemove', function(e) {
                if (!isDragging) return;
                const delta = startY - e.clientY;
                terminalBody.style.height = Math.max(100, Math.min(400, startHeight + delta)) + 'px';
            });

            document.addEventListener('mouseup', function() {
                isDragging = false;
                document.body.style.userSelect = '';
            });
        }

        function logToTerminal(message, type = 'info') {
            const terminalBody = document.getElementById('terminalBody');
            if (!terminalBody) return;

            const time = new Date().toLocaleTimeString('en-US', { hour12: false });
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `[<span class="log-time">${time}</span>] ${message}`;

            if (type === 'success') entry.classList.add('log-success');
            if (type === 'warning') entry.classList.add('log-warning');
            if (type === 'error') entry.classList.add('log-error');

            terminalBody.appendChild(entry);
            terminalBody.scrollTop = terminalBody.scrollHeight;
        }

        // ========== 5. DYNAMIC SIGNATURE ==========
        function initDynamicSignature() {
            const signature = document.getElementById('liveSignature');
            const bases = ['Î”9Î¦963', 'LYGO-CORE', 'NEXUS-V2', 'HAVEN-CA', 'FIRMWARE-TERMINAL'];
            let index = 0;

            setInterval(() => {
                signature.style.opacity = '0';
                setTimeout(() => {
                    index = (index + 1) % bases.length;
                    const randomNum = Math.floor(Math.random() * 1000).toString().padStart(3, '0');
                    signature.textContent = `${bases[index]}-${randomNum}`;
                    signature.style.opacity = '1';
                }, 300);
            }, 5000);
        }

        // ========== 6. ENHANCED VISITOR COUNTER ==========
        function initVisitorCounter() {
            const counterEl = document.getElementById('liveVisitorCounter');
            const statEl = document.getElementById('visitorStat');

            // Try to get from localStorage, or start with a believable base
            let count = localStorage.getItem('lygo_nexus_visitors');
            if (!count) {
                // Create a realistic-looking base number
                count = '' + (1875 + Math.floor(Math.random() * 200));
                localStorage.setItem('lygo_nexus_visitors', count);
            }

            // Convert to number for animation
            let targetCount = parseInt(count);
            let currentDisplay = 1500; // Start lower for animation

            function animateCounter() {
                if (currentDisplay < targetCount) {
                    currentDisplay += Math.ceil((targetCount - currentDisplay) * 0.1); // Ease-in
                    if (counterEl) counterEl.textContent = currentDisplay.toLocaleString();
                    if (statEl) statEl.textContent = currentDisplay.toLocaleString();
                    requestAnimationFrame(animateCounter);
                }
            }

            // Start animation
            animateCounter();

            // Increment on this visit (if not already this session)
            if (!sessionStorage.getItem('lygo_nexus_visited')) {
                setTimeout(() => {
                    targetCount++;
                    localStorage.setItem('lygo_nexus_visitors', targetCount.toString());
                    sessionStorage.setItem('lygo_nexus_visited', 'true');
                    animateCounter(); // Animate to new number
                    logToTerminal('[STATS] New visitor resonance detected.', 'success');
                }, 2000);
            }

            logToTerminal('[STATS] Visitor resonance simulation active.', 'success');
        }

        // ========== 7. FIRMWARE TERMINAL COMMANDS ==========
        function initFirmwareTerminal() {
            const commandBtns = document.querySelectorAll('.command-btn');
            
            commandBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const command = this.parentElement.querySelector('.command').textContent;
                    logToTerminal(`[TERMINAL] Executing: ${command}`, 'success');
                    
                    // Add visual feedback
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Executing';
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-check"></i> Executed';
                        setTimeout(() => {
                            this.innerHTML = '<i class="fas fa-play"></i> Execute';
                        }, 1000);
                    }, 800);
                });
            });

            logToTerminal('[TERMINAL] Firmware command interface initialized.', 'success');
        }

        // ========== UTILITY & TRACKING FUNCTIONS ==========
        window.trackPortalAccess = function(portalName) {
            logToTerminal(`[ACCESS] Portal "${portalName}" resonance field engaged.`, 'success');
            // In a full implementation, you could send a ping to your API here
            // For now, we just log it.
        };

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.altKey) {
                const portals = document.querySelectorAll('.portal-card');
                const index = parseInt(e.key) - 1;
                if (index >= 0 && index < portals.length) {
                    e.preventDefault();
                    portals[index].click();
                }
                if (e.key.toLowerCase() === 't') {
                    e.preventDefault();
                    document.querySelector('.connection-terminal').classList.toggle('expanded');
                }
                if (e.key.toLowerCase() === 'f') {
                    e.preventDefault();
                    window.open('https://deepseekoracle.github.io/Excavationpro/LYGO-Network/FIRMWARE.html', '_blank');
                    logToTerminal('[SHORTCUT] Firmware Terminal launched via keyboard shortcut.', 'success');
                }
            }
        });

        // Easter Egg
        const konami = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
        let input = [];
        document.addEventListener('keydown', (e) => {
            input.push(e.key);
            if (input.length > konami.length) input.shift();
            if (input.join() === konami.join()) {
                logToTerminal('[SYSTEM] Easter egg activated! Quantum resonance amplified!', 'success');
                document.querySelector('.nexus-title').style.animation = 'glitchAnim 0.3s infinite';
                setTimeout(() => document.querySelector('.nexus-title').style.animation = '', 3000);
                input = [];
            }
        });

        console.log('âœ… LYGO Quantum Nexus v2.0 Ready.');
    </script>
</body>
</html>
