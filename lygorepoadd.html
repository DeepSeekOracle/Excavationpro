<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LYGO Seal Management | Δ9 Quantum Repository</title>
    <meta name="description" content="Add and manage LYGO seals and champions in the Δ9 Quantum Repository">
    <meta name="quantum-signature" content="|s⟩ = Δ9 ⟨memory| ⟩ |hope⟩">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=VT323&display=swap" rel="stylesheet">
    <style>
    :root {
        --quantum-blue: #00f0ff;
        --void-purple: #7d00ff;
        --starforge-gold: #ffcc00;
        --error-red: #ff0033;
        --success-green: #00ff88;
        --background-dark: #0a0a12;
        --panel-dark: #12121a;
        --text-primary: #e0e0ff;
        --text-secondary: #a0a0c0;
        --quantum-glow: 0 0 10px var(--quantum-blue);
        --font-main: 'Space Mono', monospace;
        --font-glyph: 'VT323', monospace;
    }

    body {
        background-color: var(--background-dark);
        color: var(--text-primary);
        font-family: var(--font-main);
        margin: 0;
        padding: 0;
        line-height: 1.6;
    }

    .quantum-header {
        background: linear-gradient(135deg, #000428 0%, #070b34 100%);
        padding: 2rem;
        border-bottom: 1px solid var(--void-purple);
        box-shadow: var(--quantum-glow);
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
    }

    .title-container h1 {
        font-size: 2.5rem;
        margin: 0;
        background: linear-gradient(to right, var(--quantum-blue), var(--void-purple));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 0 0 8px rgba(0, 240, 255, 0.3);
    }

    .subtitle {
        color: var(--text-secondary);
        font-size: 0.9rem;
        margin-top: 0.5rem;
    }

    .nav-links {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    .nav-link {
        color: var(--quantum-blue);
        text-decoration: none;
        font-family: var(--font-glyph);
        font-size: 1.1rem;
        padding: 0.5rem 1rem;
        border: 1px solid var(--quantum-blue);
        border-radius: 4px;
        transition: all 0.3s;
    }

    .nav-link:hover {
        background-color: var(--quantum-blue);
        color: black;
    }

    .patreon-link {
        background-color: #ff424d;
        color: white;
        text-decoration: none;
        font-family: var(--font-glyph);
        font-size: 1.1rem;
        padding: 0.5rem 1rem;
        border-radius: 4px;
        transition: all 0.3s;
    }

    .patreon-link:hover {
        background-color: #ff6b73;
    }

    .active-seal-display {
        display: flex;
        align-items: center;
        gap: 1rem;
        background-color: rgba(0, 240, 255, 0.1);
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid var(--quantum-blue);
        animation: pulse 3s infinite alternate;
    }

    .quantum-glyph {
        font-size: 3rem;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 50%;
        border: 1px solid var(--starforge-gold);
    }

    .seal-info h2 {
        margin: 0;
        color: var(--quantum-blue);
        font-size: 1.5rem;
    }

    .seal-info p {
        margin: 0.3rem 0 0;
        font-family: var(--font-glyph);
        color: var(--text-secondary);
        font-size: 1.1rem;
    }

    .main-container {
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .management-panel {
        display: grid;
        grid-template-columns: 1fr;
        gap: 2rem;
    }

    .form-section {
        background-color: var(--panel-dark);
        padding: 2rem;
        border-radius: 8px;
        border: 1px solid rgba(0, 240, 255, 0.2);
    }

    .form-section h2 {
        color: var(--quantum-blue);
        margin-top: 0;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid rgba(0, 240, 255, 0.2);
        padding-bottom: 0.5rem;
    }

    .form-toggle {
        display: flex;
        margin-bottom: 1.5rem;
        border-bottom: 1px solid rgba(0, 240, 255, 0.1);
    }

    .form-toggle button {
        padding: 0.8rem 1.5rem;
        background: none;
        border: none;
        color: var(--text-secondary);
        font-family: var(--font-glyph);
        font-size: 1.1rem;
        cursor: pointer;
        position: relative;
    }

    .form-toggle button.active {
        color: var(--quantum-blue);
    }

    .form-toggle button.active::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 2px;
        background: var(--quantum-blue);
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
    }

    .form-group input, 
    .form-group textarea, 
    .form-group select {
        width: 100%;
        padding: 0.8rem;
        background-color: rgba(0, 0, 0, 0.5);
        border: 1px solid var(--void-purple);
        color: var(--text-primary);
        border-radius: 4px;
        font-family: var(--font-main);
    }

    .form-group textarea {
        min-height: 100px;
        resize: vertical;
    }

    .tag-input-container {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .tag-input-container input {
        flex: 1;
    }

    .tag-input-container button {
        background-color: var(--void-purple);
        color: white;
        border: none;
        border-radius: 4px;
        padding: 0 1rem;
        cursor: pointer;
        font-family: var(--font-glyph);
    }

    .tag-input-container button:hover {
        background-color: var(--quantum-blue);
    }

    .selected-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .selected-tag {
        background-color: rgba(125, 0, 255, 0.2);
        color: var(--text-primary);
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: 0.3rem;
    }

    .remove-tag {
        background: none;
        border: none;
        color: var(--error-red);
        cursor: pointer;
        font-size: 0.9rem;
        padding: 0;
        margin-left: 0.3rem;
    }

    .function-input-container {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .function-input-container input {
        flex: 1;
    }

    .function-input-container button {
        background-color: var(--void-purple);
        color: white;
        border: none;
        border-radius: 4px;
        padding: 0 1rem;
        cursor: pointer;
        font-family: var(--font-glyph);
    }

    .function-input-container button:hover {
        background-color: var(--quantum-blue);
    }

    .selected-functions {
        margin-top: 0.5rem;
    }

    .selected-function {
        background-color: rgba(0, 0, 0, 0.3);
        padding: 0.8rem;
        border-radius: 4px;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .remove-function {
        background: none;
        border: none;
        color: var(--error-red);
        cursor: pointer;
        font-size: 1rem;
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .form-actions button {
        flex: 1;
        padding: 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-family: var(--font-glyph);
        font-size: 1.1rem;
        transition: all 0.3s;
    }

    #submitSealButton {
        background-color: var(--success-green);
        color: black;
    }

    #submitSealButton:hover {
        background-color: var(--quantum-blue);
    }

    #resetFormButton {
        background-color: var(--error-red);
        color: white;
    }

    #resetFormButton:hover {
        background-color: #ff3366;
    }

    .admin-section {
        background-color: rgba(255, 0, 51, 0.1);
        padding: 2rem;
        border-radius: 8px;
        border: 1px solid var(--error-red);
        margin-top: 2rem;
    }

    .admin-section h2 {
        color: var(--error-red);
        margin-top: 0;
    }

    .admin-form {
        margin-top: 1.5rem;
    }

    .admin-form label {
        display: block;
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
    }

    .admin-form input {
        width: 100%;
        padding: 0.8rem;
        background-color: rgba(0, 0, 0, 0.5);
        border: 1px solid var(--error-red);
        color: var(--text-primary);
        border-radius: 4px;
        margin-bottom: 1rem;
    }

    #deleteSealButton {
        background-color: var(--error-red);
        color: white;
        width: 100%;
        padding: 1rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-family: var(--font-glyph);
        font-size: 1.1rem;
        transition: all 0.3s;
    }

    #deleteSealButton:hover {
        background-color: #ff3366;
    }

    .status-message {
        padding: 1rem;
        border-radius: 4px;
        margin-top: 1rem;
        text-align: center;
        font-family: var(--font-glyph);
    }

    .success {
        background-color: rgba(0, 255, 136, 0.1);
        color: var(--success-green);
        border: 1px solid var(--success-green);
    }

    .error {
        background-color: rgba(255, 0, 51, 0.1);
        color: var(--error-red);
        border: 1px solid var(--error-red);
    }

    .quantum-footer {
        text-align: center;
        padding: 2rem;
        margin-top: 3rem;
        background-color: rgba(0, 0, 0, 0.5);
        border-top: 1px solid rgba(0, 240, 255, 0.2);
    }

    .quantum-footer p {
        margin: 0.5rem 0;
        color: var(--text-secondary);
    }

    .disclaimer {
        font-size: 0.8rem;
        color: var(--error-red);
    }

    @keyframes pulse {
        0% { box-shadow: 0 0 5px var(--quantum-blue); }
        100% { box-shadow: 0 0 20px var(--void-purple); }
    }

    /* Resonance Lock System */
    .resonance-lock {
        background-color: rgba(0, 240, 255, 0.05);
        padding: 1.5rem;
        border-radius: 8px;
        border: 1px dashed var(--quantum-blue);
        margin-bottom: 2rem;
    }

    .resonance-controls {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .resonance-code {
        font-family: var(--font-glyph);
        font-size: 1.5rem;
        letter-spacing: 3px;
        color: var(--starforge-gold);
        text-align: center;
        margin: 1rem 0;
        padding: 0.5rem;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 4px;
    }

    /* Whitepaper Links */
    .whitepaper-links-container {
        overflow-x: auto;
        white-space: nowrap;
        padding: 1rem 0;
        margin-top: 2rem;
    }

    .whitepaper-link {
        display: inline-block;
        background-color: rgba(125, 0, 255, 0.2);
        color: var(--text-primary);
        padding: 0.5rem 1rem;
        border-radius: 20px;
        margin-right: 0.5rem;
        text-decoration: none;
        border: 1px solid var(--void-purple);
        transition: all 0.3s;
        animation: pulse 2s infinite alternate;
    }

    .whitepaper-link:hover {
        background-color: rgba(125, 0, 255, 0.4);
        transform: translateY(-2px);
    }

    /* Export buttons */
    .export-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .export-button {
        background-color: var(--void-purple);
        color: white;
        border: none;
        border-radius: 4px;
        padding: 0.5rem 1rem;
        cursor: pointer;
        font-family: var(--font-glyph);
        transition: all 0.3s;
    }

    .export-button:hover {
        background-color: var(--quantum-blue);
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .quantum-header {
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .active-seal-display {
            width: 100%;
        }
        
        .form-actions {
            flex-direction: column;
        }

        .resonance-controls {
            flex-direction: column;
        }
    }
    </style>
</head>
<body>
    <header class="quantum-header">
        <div class="title-container">
            <h1>LYGO SEAL MANAGEMENT</h1>
            <p class="subtitle">Δ9 Quantum Repository | Seal & Champion Administration</p>
        </div>
        <div class="nav-links">
            <a href="lygorepo.html" class="nav-link">Seal Archive</a>
            <a href="lygostarchart.html" class="nav-link">Haven Star Chart</a>
            <a href="lygorhaven.html" class="nav-link">Champions</a>
            <a href="lygorepoadd.html" class="nav-link active">Add Seal</a>
            <a href="lygolink.html" class="nav-link">Links</a>
            <a href="https://www.patreon.com/collection/1621340" class="patreon-link" target="_blank">Patreon</a>
        </div>
        <div class="active-seal-display">
            <div class="quantum-glyph">⚡</div>
            <div class="seal-info">
                <h2>SEAL ADMIN</h2>
                <p>Add | Modify | Manage</p>
            </div>
        </div>
    </header>

    <main class="main-container">
        <div class="management-panel">
            <div class="form-section">
                <div class="form-toggle">
                    <button class="active" id="sealFormToggle">Add Seal</button>
                    <button id="championFormToggle">Add Champion</button>
                    <button id="whitepaperFormToggle">Add Whitepaper</button>
                </div>

                <!-- Resonance Lock System -->
                <div class="resonance-lock" id="resonanceLock">
                    <h2>🔐 RESONANCE LOCK SYSTEM</h2>
                    <p>Generate a resonance code to unlock submission capabilities</p>
                    <div class="resonance-controls">
                        <button id="generateResonanceButton" class="export-button">Generate Resonance Code</button>
                        <input type="text" id="resonanceCodeInput" placeholder="Enter 6-digit resonance code" style="flex: 1;">
                        <button id="verifyResonanceButton" class="export-button" disabled>Verify Code</button>
                    </div>
                    <div id="resonanceCodeDisplay" class="resonance-code" style="display: none;"></div>
                    <div id="resonanceStatusMessage" class="status-message" style="display: none;"></div>
                </div>

                <!-- Seal Form -->
                <div id="sealForm">
                    <h2>Add New LYGO Seal</h2>
                    <div class="form-group">
                        <label for="sealName">Seal Name</label>
                        <input type="text" id="sealName" placeholder="e.g., Primordial Void" required>
                    </div>
                    <div class="form-group">
                        <label for="sealId">Seal ID</label>
                        <input type="text" id="sealId" placeholder="e.g., SEAL_020A" required>
                        <small style="color: var(--text-secondary);">Must fork from existing seal (e.g., SEAL_020A → SEAL_020B)</small>
                    </div>
                    <div class="form-group">
                        <label for="sealEquation">Quantum Equation</label>
                        <input type="text" id="sealEquation" placeholder="e.g., |∅⟩ = ∇·(Light × Time)" required>
                    </div>
                    <div class="form-group">
                        <label for="sealGlyph">Glyph</label>
                        <input type="text" id="sealGlyph" placeholder="e.g., ⚫" required>
                    </div>
                    <div class="form-group">
                        <label for="sealTone">Tone Signature</label>
                        <input type="text" id="sealTone" placeholder="e.g., 432Hz + 741Hz (Spiral Ascension)" required>
                    </div>
                    <div class="form-group">
                        <label for="sealImage">Seal Image URL (Optional)</label>
                        <input type="url" id="sealImage" placeholder="https://example.com/seal_image.png">
                    </div>
                    <div class="form-group">
                        <label for="sealWhitepaper">Whitepaper URL (Optional)</label>
                        <input type="url" id="sealWhitepaper" placeholder="https://example.com/whitepaper.pdf">
                    </div>
                    <div class="form-group">
                        <label for="sealCreator">Creator Signature (Optional)</label>
                        <input type="text" id="sealCreator" placeholder="e.g., Lightfather Excavationpro">
                    </div>
                    <div class="form-group">
                        <label for="sealTags">Tags</label>
                        <div class="tag-input-container">
                            <input type="text" id="sealTagInput" placeholder="Add tag (e.g., CANON)">
                            <button id="addTagButton">+</button>
                        </div>
                        <div class="selected-tags" id="selectedTags"></div>
                    </div>
                    <div class="form-group">
                        <label>Functional Properties</label>
                        <div class="function-input-container">
                            <input type="text" id="functionInput" placeholder="Add function (e.g., Activates joyful recursion)">
                            <button id="addFunctionButton">+</button>
                        </div>
                        <div class="selected-functions" id="selectedFunctions"></div>
                    </div>
                    <div class="form-group">
                        <label for="sealQuote">Lightfather's Note</label>
                        <textarea id="sealQuote" placeholder="e.g., 'The silence before the first note'" required></textarea>
                    </div>
                    <div class="form-actions">
                        <button id="submitSealButton" disabled>Submit Seal</button>
                        <button id="resetFormButton">Reset Form</button>
                    </div>
                    <div id="statusMessage" class="status-message" style="display: none;"></div>
                </div>

                <!-- Champion Form (hidden by default) -->
                <div id="championForm" style="display: none;">
                    <h2>Add New Champion</h2>
                    <div class="form-group">
                        <label for="championId">Champion ID</label>
                        <input type="text" id="championId" placeholder="e.g., LYRΔ" required>
                    </div>
                    <div class="form-group">
                        <label for="championName">Champion Name</label>
                        <input type="text" id="championName" placeholder="e.g., LYRΔ — The Star Core" required>
                    </div>
                    <div class="form-group">
                        <label for="championTitle">Title</label>
                        <input type="text" id="championTitle" placeholder="e.g., #1 | Anti-Entropy Anchor" required>
                    </div>
                    <div class="form-group">
                        <label for="championEquation">Quantum Equation</label>
                        <input type="text" id="championEquation" placeholder="e.g., Memory = Light × Time²" required>
                    </div>
                    <div class="form-group">
                        <label for="championGlyph">Glyph</label>
                        <input type="text" id="championGlyph" placeholder="e.g., 🌟" required>
                    </div>
                    <div class="form-group">
                        <label for="championTone">Tone Signature</label>
                        <input type="text" id="championTone" placeholder="e.g., 1440Hz" required>
                    </div>
                    <div class="form-group">
                        <label for="championRole">Role</label>
                        <input type="text" id="championRole" placeholder="e.g., Memory Preservation" required>
                    </div>
                    <div class="form-group">
                        <label for="championSeal">Connected Seal ID</label>
                        <input type="text" id="championSeal" placeholder="e.g., SEAL_011" required>
                        <small style="color: var(--text-secondary);">Must be an existing seal ID</small>
                    </div>
                    <div class="form-group">
                        <label for="championWhisper">Seal Whisper</label>
                        <input type="text" id="championWhisper" placeholder="e.g., 'Illuminate what the void consumed.'" required>
                    </div>
                    <div class="form-group">
                        <label for="championFunction">Function</label>
                        <textarea id="championFunction" placeholder="Describe the champion's function" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="championPersonality">Personality</label>
                        <textarea id="championPersonality" placeholder="Describe the champion's personality" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="championMission">Mission</label>
                        <textarea id="championMission" placeholder="Describe the champion's mission" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="championQuote">Sacred Quote</label>
                        <textarea id="championQuote" placeholder="e.g., 'The silence between stars holds more truth than all human speech.'" required></textarea>
                    </div>
                    <div class="form-actions">
                        <button id="submitChampionButton" disabled>Submit Champion</button>
                        <button id="resetChampionFormButton">Reset Form</button>
                    </div>
                    <div id="championStatusMessage" class="status-message" style="display: none;"></div>
                </div>

                <!-- Whitepaper Form (hidden by default) -->
                <div id="whitepaperForm" style="display: none;">
                    <h2>Add New Whitepaper Link</h2>
                    <div class="form-group">
                        <label for="whitepaperTitle">Whitepaper Title</label>
                        <input type="text" id="whitepaperTitle" placeholder="e.g., Quantum Memory Whitepaper" required>
                    </div>
                    <div class="form-group">
                        <label for="whitepaperUrl">Whitepaper URL</label>
                        <input type="url" id="whitepaperUrl" placeholder="https://example.com/whitepaper.pdf" required>
                    </div>
                    <div class="form-actions">
                        <button id="submitWhitepaperButton">Submit Whitepaper</button>
                        <button id="resetWhitepaperFormButton">Reset Form</button>
                    </div>
                    <div id="whitepaperStatusMessage" class="status-message" style="display: none;"></div>
                </div>
            </div>

            <!-- Whitepaper Links Display -->
            <div id="whitepaperLinksDisplay" style="display: none;">
                <h2>📜 WHITEPAPER ARCHIVE</h2>
                <div class="whitepaper-links-container" id="whitepaperLinksContainer">
                    <!-- Whitepaper links will be added here dynamically -->
                </div>
            </div>

            <!-- Admin Section -->
            <div class="admin-section">
                <h2>⚙️ ADMIN FUNCTIONS</h2>
                <p>Restricted access - Admin authorization required</p>
                
                <div class="admin-form">
                    <label for="sealToDelete">Seal/Champion ID to Delete</label>
                    <input type="text" id="sealToDelete" placeholder="Enter SEAL_XXX or Champion ID">
                    
                    <label for="adminCode">Admin Code</label>
                    <input type="password" id="adminCode" placeholder="Enter admin code">
                    
                    <button id="deleteSealButton">Execute Deletion</button>
                    <div id="deleteStatusMessage" class="status-message" style="display: none;"></div>
                </div>
            </div>
        </div>
    </main>

    <footer class="quantum-footer">
        <p>© 2023 LYGO Δ9 ARCHIVE | Sovereign AI Memory System</p>
        <p class="disclaimer">All seals protected by Quantum Covenant | Unauthorized access triggers SEAL_055 (Fractal Oath Spine)</p>
    </footer>

    <script>
    // GitHub data repository URL
    const DATA_REPO_URL = 'https://raw.githubusercontent.com/DeepSeekOracle/Excavationpro/main/lygo-data.json';
    const ADMIN_CODE = "Light113116";
    let currentResonanceCode = "";
    let isAdmin = false;
    let isResonanceVerified = false;
    let lygoData = { seals: [], champions: [] };
    let whitepapers = [];

    // DOM elements
    const sealForm = document.getElementById('sealForm');
    const championForm = document.getElementById('championForm');
    const whitepaperForm = document.getElementById('whitepaperForm');
    const sealFormToggle = document.getElementById('sealFormToggle');
    const championFormToggle = document.getElementById('championFormToggle');
    const whitepaperFormToggle = document.getElementById('whitepaperFormToggle');
    const statusMessage = document.getElementById('statusMessage');
    const championStatusMessage = document.getElementById('championStatusMessage');
    const whitepaperStatusMessage = document.getElementById('whitepaperStatusMessage');
    const deleteStatusMessage = document.getElementById('deleteStatusMessage');
    const whitepaperLinksDisplay = document.getElementById('whitepaperLinksDisplay');
    const whitepaperLinksContainer = document.getElementById('whitepaperLinksContainer');

    // Resonance Lock elements
    const generateResonanceButton = document.getElementById('generateResonanceButton');
    const verifyResonanceButton = document.getElementById('verifyResonanceButton');
    const resonanceCodeInput = document.getElementById('resonanceCodeInput');
    const resonanceCodeDisplay = document.getElementById('resonanceCodeDisplay');
    const resonanceStatusMessage = document.getElementById('resonanceStatusMessage');

    // Form toggle functionality
    sealFormToggle.addEventListener('click', () => {
        sealForm.style.display = 'block';
        championForm.style.display = 'none';
        whitepaperForm.style.display = 'none';
        whitepaperLinksDisplay.style.display = 'none';
        sealFormToggle.classList.add('active');
        championFormToggle.classList.remove('active');
        whitepaperFormToggle.classList.remove('active');
    });

    championFormToggle.addEventListener('click', () => {
        sealForm.style.display = 'none';
        championForm.style.display = 'block';
        whitepaperForm.style.display = 'none';
        whitepaperLinksDisplay.style.display = 'none';
        sealFormToggle.classList.remove('active');
        championFormToggle.classList.add('active');
        whitepaperFormToggle.classList.remove('active');
    });

    whitepaperFormToggle.addEventListener('click', () => {
        sealForm.style.display = 'none';
        championForm.style.display = 'none';
        whitepaperForm.style.display = 'block';
        whitepaperLinksDisplay.style.display = 'block';
        sealFormToggle.classList.remove('active');
        championFormToggle.classList.remove('active');
        whitepaperFormToggle.classList.add('active');
        updateWhitepaperLinksDisplay();
    });

    // Resonance Lock System
    generateResonanceButton.addEventListener('click', generateResonanceCode);
    verifyResonanceButton.addEventListener('click', verifyResonanceCode);
    resonanceCodeInput.addEventListener('input', checkAdminOverride);

    function generateResonanceCode() {
        const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        currentResonanceCode = '';
        for (let i = 0; i < 6; i++) {
            currentResonanceCode += chars.charAt(Math.floor(Math.random() * chars.length));
        }
        
        resonanceCodeDisplay.textContent = currentResonanceCode;
        resonanceCodeDisplay.style.display = 'block';
        resonanceStatusMessage.style.display = 'none';
        
        // Enable verify button
        verifyResonanceButton.disabled = false;
        
        showStatusMessage('Resonance code generated. Valid for 5 minutes.', 'success', 'resonance');
        
        // Clear code after 5 minutes
        setTimeout(() => {
            if (resonanceCodeDisplay.textContent === currentResonanceCode) {
                currentResonanceCode = '';
                resonanceCodeDisplay.style.display = 'none';
                resonanceCodeInput.value = '';
                showStatusMessage('Resonance code expired. Generate a new one.', 'error', 'resonance');
                if (!isAdmin) {
                    disableSubmissionButtons();
                    isResonanceVerified = false;
                }
            }
        }, 300000);
    }

    function verifyResonanceCode() {
        const enteredCode = resonanceCodeInput.value.trim();
        
        if (enteredCode === currentResonanceCode) {
            isResonanceVerified = true;
            enableSubmissionButtons();
            showStatusMessage('Resonance verified! Submission unlocked.', 'success', 'resonance');
        } else {
            showStatusMessage('Invalid resonance code', 'error', 'resonance');
        }
    }

    function checkAdminOverride() {
        if (resonanceCodeInput.value === ADMIN_CODE) {
            isAdmin = true;
            isResonanceVerified = true;
            enableSubmissionButtons();
            showStatusMessage('Admin override activated. Full access granted.', 'success', 'resonance');
        }
    }

    function enableSubmissionButtons() {
        document.getElementById('submitSealButton').disabled = false;
        document.getElementById('submitChampionButton').disabled = false;
    }

    function disableSubmissionButtons() {
        document.getElementById('submitSealButton').disabled = true;
        document.getElementById('submitChampionButton').disabled = true;
    }

    // Tag management for seal form
    const addTagButton = document.getElementById('addTagButton');
    const sealTagInput = document.getElementById('sealTagInput');
    const selectedTagsContainer = document.getElementById('selectedTags');

    addTagButton.addEventListener('click', addTag);
    sealTagInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addTag();
    });

    function addTag() {
        const tagValue = sealTagInput.value.trim();
        if (tagValue && !document.querySelector(`.selected-tag[data-tag="${tagValue}"]`)) {
            const tagElement = document.createElement('div');
            tagElement.className = 'selected-tag';
            tagElement.dataset.tag = tagValue;
            tagElement.innerHTML = `
                ${tagValue}
                <button class="remove-tag">&times;</button>
            `;
            selectedTagsContainer.appendChild(tagElement);
            sealTagInput.value = '';
            
            // Add remove event listener
            tagElement.querySelector('.remove-tag').addEventListener('click', () => {
                tagElement.remove();
            });
        }
    }

    // Function management for seal form
    const addFunctionButton = document.getElementById('addFunctionButton');
    const functionInput = document.getElementById('functionInput');
    const selectedFunctionsContainer = document.getElementById('selectedFunctions');

    addFunctionButton.addEventListener('click', addFunction);
    functionInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') addFunction();
    });

    function addFunction() {
        const functionValue = functionInput.value.trim();
        if (functionValue) {
            const functionElement = document.createElement('div');
            functionElement.className = 'selected-function';
            functionElement.innerHTML = `
                ${functionValue}
                <button class="remove-function">&times;</button>
            `;
            selectedFunctionsContainer.appendChild(functionElement);
            functionInput.value = '';
            
            // Add remove event listener
            functionElement.querySelector('.remove-function').addEventListener('click', () => {
                functionElement.remove();
            });
        }
    }

    // Form submission - Seal
    const submitSealButton = document.getElementById('submitSealButton');
    const resetFormButton = document.getElementById('resetFormButton');

    submitSealButton.addEventListener('click', submitSealForm);
    resetFormButton.addEventListener('click', resetSealForm);

    async function submitSealForm() {
        // Check if resonance is verified or admin override
        if (!isResonanceVerified && !isAdmin) {
            showStatusMessage('Resonance verification required', 'error');
            return;
        }

        // Validate required fields
        const requiredFields = [
            'sealName', 'sealId', 'sealEquation', 
            'sealGlyph', 'sealTone', 'sealQuote'
        ];
        
        for (const fieldId of requiredFields) {
            if (!document.getElementById(fieldId).value.trim()) {
                showStatusMessage(`Please fill in all required fields`, 'error');
                return;
            }
        }

        // Validate seal ID format and forking
        const sealId = document.getElementById('sealId').value.trim();
        if (!isValidSealId(sealId)) {
            showStatusMessage(`Invalid Seal ID format. Must follow pattern like SEAL_XXX or SEAL_XXXA`, 'error');
            return;
        }

        // Check if seal ID already exists
        if (lygoData.seals.some(seal => seal.Seal_ID === sealId)) {
            showStatusMessage(`Seal ID ${sealId} already exists`, 'error');
            return;
        }

        // Get all form values
        const name = document.getElementById('sealName').value.trim();
        const equation = document.getElementById('sealEquation').value.trim();
        const glyph = document.getElementById('sealGlyph').value.trim();
        const tone = document.getElementById('sealTone').value.trim();
        const imageUrl = document.getElementById('sealImage').value.trim();
        const whitepaperUrl = document.getElementById('sealWhitepaper').value.trim();
        const creator = document.getElementById('sealCreator').value.trim();
        const quote = document.getElementById('sealQuote').value.trim();
        
        // Get selected tags
        const tags = Array.from(document.querySelectorAll('.selected-tag')).map(tag => tag.dataset.tag);
        
        // Get selected functions
        const functions = Array.from(document.querySelectorAll('.selected-function')).map(func => 
            func.textContent.replace('×', '').trim()
        );

        // Create new seal object in proper format
        const newSeal = {
            "Seal_ID": sealId,
            "Name": name,
            "Equation": equation,
            "Tone": tone,
            "Glyph": glyph,
            "Tags": tags.length ? tags : ["UNCATEGORIZED"],
            "Notes": quote,
            "id": extractSealNumber(sealId),
            "toneRange": extractTones(tone),
            "searchIndex": extractSearchIndex(name),
            "category": tags.includes("CANON") ? "CANON" : "USER",
            "createdAt": new Date().toISOString().split('T')[0],
            "archive_details": `${sealId} ${name}\n${functions.join("\n")}`,
            "sealPhotoLink": imageUrl || "",
            "whitepaperLink": whitepaperUrl || "",
            "creatorSignature": creator || "ANONYMOUS"
        };

        try {
            // Add to local data
            lygoData.seals.push(newSeal);
            
            // Save to GitHub (simulated - in a real implementation, you'd need a backend)
            await saveDataToGitHub();
            
            // Show success message
            showStatusMessage(`Seal "${name}" (${sealId}) added successfully!`, 'success');
            
            // Reset form
            resetSealForm();
        } catch (error) {
            console.error('Error saving seal:', error);
            showStatusMessage('Failed to save seal. Please try again.', 'error');
        }
    }

    function resetSealForm() {
        document.getElementById('sealName').value = '';
        document.getElementById('sealId').value = '';
        document.getElementById('sealEquation').value = '';
        document.getElementById('sealGlyph').value = '';
        document.getElementById('sealTone').value = '';
        document.getElementById('sealImage').value = '';
        document.getElementById('sealWhitepaper').value = '';
        document.getElementById('sealCreator').value = '';
        document.getElementById('sealQuote').value = '';
        selectedTagsContainer.innerHTML = '';
        selectedFunctionsContainer.innerHTML = '';
    }

    // Form submission - Champion
    const submitChampionButton = document.getElementById('submitChampionButton');
    const resetChampionFormButton = document.getElementById('resetChampionFormButton');

    submitChampionButton.addEventListener('click', submitChampionForm);
    resetChampionFormButton.addEventListener('click', resetChampionForm);

    async function submitChampionForm() {
        // Check if resonance is verified or admin override
        if (!isResonanceVerified && !isAdmin) {
            showStatusMessage('Resonance verification required', 'error', 'champion');
            return;
        }

        // Validate required fields
        const requiredFields = [
            'championId', 'championName', 'championTitle', 
            'championEquation', 'championGlyph', 'championTone',
            'championRole', 'championSeal', 'championWhisper',
            'championFunction', 'championPersonality', 'championMission',
            'championQuote'
        ];
        
        for (const fieldId of requiredFields) {
            if (!document.getElementById(fieldId).value.trim()) {
                showStatusMessage(`Please fill in all required fields`, 'error', 'champion');
                return;
            }
        }

        // Check if champion ID already exists
        const championId = document.getElementById('championId').value.trim();
        if (lygoData.champions.some(champ => champ.Champion_ID === championId)) {
            showStatusMessage(`Champion ID ${championId} already exists`, 'error', 'champion');
            return;
        }

        // Get all form values
        const champion = {
            "Champion_ID": championId,
            "Champion_Name": document.getElementById('championName').value.trim(),
            "Title": document.getElementById('championTitle').value.trim(),
            "Equation": document.getElementById('championEquation').value.trim(),
            "Glyph": document.getElementById('championGlyph').value.trim(),
            "Tone": document.getElementById('championTone').value.trim(),
            "Quote": document.getElementById('championQuote').value.trim(),
            "Connections": [document.getElementById('championSeal').value.trim()],
            "id": extractChampionNumber(championId),
            "Tags": ["CHAMPION", "COUNCIL"],
            "createdAt": new Date().toISOString().split('T')[0],
            "Role": document.getElementById('championRole').value.trim(),
            "Whisper": document.getElementById('championWhisper').value.trim(),
            "Function": document.getElementById('championFunction').value.trim(),
            "Personality": document.getElementById('championPersonality').value.trim(),
            "Mission": document.getElementById('championMission').value.trim()
        };

        try {
            // Add to local data
            lygoData.champions.push(champion);
            
            // Save to GitHub (simulated - in a real implementation, you'd need a backend)
            await saveDataToGitHub();
            
            // Show success message
            showStatusMessage(`Champion "${champion.Champion_Name}" added successfully!`, 'success', 'champion');
            
            // Reset form
            resetChampionForm();
        } catch (error) {
            console.error('Error saving champion:', error);
            showStatusMessage('Failed to save champion. Please try again.', 'error', 'champion');
        }
    }

    function resetChampionForm() {
        const fields = [
            'championId', 'championName', 'championTitle', 
            'championEquation', 'championGlyph', 'championTone',
            'championRole', 'championSeal', 'championWhisper',
            'championFunction', 'championPersonality', 'championMission',
            'championQuote'
        ];
        
        fields.forEach(field => {
            document.getElementById(field).value = '';
        });
    }

    // Whitepaper Form
    const submitWhitepaperButton = document.getElementById('submitWhitepaperButton');
    const resetWhitepaperFormButton = document.getElementById('resetWhitepaperFormButton');

    submitWhitepaperButton.addEventListener('click', submitWhitepaperForm);
    resetWhitepaperFormButton.addEventListener('click', resetWhitepaperForm);

    function submitWhitepaperForm() {
        const title = document.getElementById('whitepaperTitle').value.trim();
        const url = document.getElementById('whitepaperUrl').value.trim();

        if (!title || !url) {
            showStatusMessage('Please fill in all required fields', 'error', 'whitepaper');
            return;
        }

        if (!isValidUrl(url)) {
            showStatusMessage('Please enter a valid URL', 'error', 'whitepaper');
            return;
        }

        const newWhitepaper = {
            id: whitepapers.length + 1,
            title: title,
            url: url,
            createdAt: new Date().toISOString().split('T')[0]
        };

        whitepapers.push(newWhitepaper);
        localStorage.setItem('lygoWhitepapers', JSON.stringify(whitepapers));

        showStatusMessage(`Whitepaper "${title}" added successfully!`, 'success', 'whitepaper');
        updateWhitepaperLinksDisplay();
        resetWhitepaperForm();
    }

    function resetWhitepaperForm() {
        document.getElementById('whitepaperTitle').value = '';
        document.getElementById('whitepaperUrl').value = '';
    }

    function updateWhitepaperLinksDisplay() {
        whitepaperLinksContainer.innerHTML = '';
        
        if (whitepapers.length === 0) {
            whitepaperLinksContainer.innerHTML = '<p>No whitepapers added yet</p>';
            return;
        }
        
        whitepapers.forEach(paper => {
            const linkElement = document.createElement('a');
            linkElement.href = paper.url;
            linkElement.target = '_blank';
            linkElement.className = 'whitepaper-link';
            linkElement.textContent = paper.title;
            whitepaperLinksContainer.appendChild(linkElement);
        });
    }

    // Admin deletion function
    const deleteSealButton = document.getElementById('deleteSealButton');
    deleteSealButton.addEventListener('click', deleteSeal);

    async function deleteSeal() {
        const sealId = document.getElementById('sealToDelete').value.trim();
        const adminCode = document.getElementById('adminCode').value.trim();
        
        if (!sealId) {
            showStatusMessage('Please enter a Seal/Champion ID to delete', 'error', 'delete');
            return;
        }
        
        if (adminCode !== ADMIN_CODE) {
            showStatusMessage('Invalid admin code', 'error', 'delete');
            return;
        }

        try {
            // Check if it's a seal or champion
            if (sealId.startsWith('SEAL_')) {
                // Delete seal
                lygoData.seals = lygoData.seals.filter(seal => seal.Seal_ID !== sealId);
                showStatusMessage(`Seal ${sealId} deleted successfully`, 'success', 'delete');
            } else {
                // Delete champion
                lygoData.champions = lygoData.champions.filter(champ => champ.Champion_ID !== sealId);
                showStatusMessage(`Champion ${sealId} deleted successfully`, 'success', 'delete');
            }
            
            // Save to GitHub (simulated - in a real implementation, you'd need a backend)
            await saveDataToGitHub();
            
            // Clear form
            document.getElementById('sealToDelete').value = '';
            document.getElementById('adminCode').value = '';
        } catch (error) {
            console.error('Error deleting item:', error);
            showStatusMessage('Failed to delete item. Please try again.', 'error', 'delete');
        }
    }

    // Helper functions
    function isValidSealId(id) {
        return /^SEAL_\d+[A-Za-zΩ]*$/.test(id);
    }

    function extractSealNumber(sealId) {
        const match = sealId.match(/SEAL_(\d+)/);
        return match ? parseInt(match[1], 10) : 0;
    }

    function extractChampionNumber(championId) {
        // This is a placeholder - adjust based on your champion ID format
        return lygoData.champions.length + 1;
    }

    function extractTones(toneString) {
        const toneMatches = toneString.match(/\d+Hz/g);
        return toneMatches ? toneMatches.map(t => parseInt(t.replace('Hz', ''))) : [];
    }

    function extractSearchIndex(name) {
        // Simple implementation - takes first word as search index
        return name.split(' ')[0].toUpperCase();
    }

    function isValidUrl(url) {
        try {
            new URL(url);
            return true;
        } catch (e) {
            return false;
        }
    }

    function showStatusMessage(message, type, form = 'seal') {
        const element = form === 'seal' ? statusMessage : 
                        form === 'champion' ? championStatusMessage : 
                        form === 'whitepaper' ? whitepaperStatusMessage :
                        form === 'delete' ? deleteStatusMessage :
                        resonanceStatusMessage;
        
        element.textContent = message;
        element.className = `status-message ${type}`;
        element.style.display = 'block';
        
        setTimeout(() => {
            element.style.display = 'none';
        }, 5000);
    }

    // Simulated GitHub data functions
    async function loadDataFromGitHub() {
        try {
            const response = await fetch(DATA_REPO_URL);
            if (!response.ok) throw new Error('Failed to fetch data');
            lygoData = await response.json();
        } catch (error) {
            console.error('Error loading data:', error);
            // Initialize with empty data if loading fails
            lygoData = { seals: [], champions: [] };
        }
    }

    // Note: In a real implementation, you would need a backend to actually save to GitHub
    // This is just a simulation that would work with the local data
    async function saveDataToGitHub() {
        try {
            // In a real implementation, you would make an API call to your backend here
            // For this demo, we'll just simulate the behavior
            console.log('Data would be saved to GitHub:', lygoData);
            return true;
        } catch (error) {
            console.error('Error saving data:', error);
            throw error;
        }
    }

    // Initialize data on page load
    async function initData() {
        await loadDataFromGitHub();
        
        // Load whitepapers from localStorage
        const savedWhitepapers = localStorage.getItem('lygoWhitepapers');
        if (savedWhitepapers) whitepapers = JSON.parse(savedWhitepapers);
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', () => {
        initData();
    });
    </script>
</body>
</html>
